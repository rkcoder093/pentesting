# DNS 

![domain](image.png)

## The DNS servers are divided into four different types:

- Recursive resolvers (DNS Recursor)
- Root name server
- TLD name server
- Authoritative name servers

## DNS Zones

**Zone Files** 
- Primary zone (master zone)
- Secondary zone (slave zone)

The secondary zone on the secondary DNS server serves as a substitute for the primary zone on the primary DNS server if the primary DNS server should become unreachable. The creation and transfer of the primary zone copy from the primary DNS server to the secondary DNS server is called a "zone transfer."The update of the zone files can only be done on the primary DNS server, which then updates the secondary DNS server. Each zone file can have only one primary DNS server and an unlimited number of secondary DNS servers.

Zone Transfer
There are two different types of zone transfers.

- AXFR - Asynchronous Full Transfer Zone
- IXFR - Incremental Zone Transfer

## DNS Records and Queries


|Record| 	Description|
|-|-|
|A| 	IP Version 4 Address records|
|AAAA| 	IP Version 6 Address records|
|CNAME| 	Canonical Name records|
|HINFO| 	Host Information records|
|ISDN| 	Integrated Services Digital Network records|
|MX| 	Mail exchanger record|
|NS| 	Name Server records|
|PTR| 	Reverse-lookup Pointer records|
|SOA| 	Start of Authority records|
|TXT| 	Text records|

There are many tools and resources we can work with to send queries to the DNS servers. For example, we can use tools like:

- dig
- nslookup

NS-query `dig NS inlanefreight.com`
SOA Queries `dig SOA inlanefreight.com`
SPF `nslookup -type=SPF inlanefreight.com`
DMARC `nslookup -type=txt _dmarc.inlanefreight.com`

## DNS Enumeration

- OSINT `google dorking`,  public service - `VirusTotal`, `DNSdumpster`, `Netcraft`
- Certificate Transparency  [CTFR](https://github.com/UnaPibaGeek/ctfr)
- Zone transfer `dig axfr inlanefreight.com @10.129.2.67`

