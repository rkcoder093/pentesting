# interacting with the Common services.

# File sharing service.

- SMB, NFS, FTP, TFTP, SFTP
- cloud - Dropbox, Google Drive, OneDrive, SharePoint, AWS S3, Azure Blob Storage, or Google Cloud Storage

****

# SMB 

## GUI intraction
1. `[WINKEY] + [R]`
2. \\192.168.220.129\Finance\ # this is an example.
**Note** if the the smb allows ananomous then we access the dir, or we prompt to authanticate it

## CMD Commands
`net use` connects a computer to or disconnects a computer from a shared resource or displays information about computer connections.

    net use n: \\192.168.220.129\Finance # mape it to driver n
    net use n: \\192.168.220.129\Finance /user:plaintext Password123    #with authanticate

    dir n: /a-d /s /b | find /c ":\"     #count the number os files inthe dir and sub dir.

    dir n:\*cred* /s /b                  #search for file with name having cred
    findstr /s /i cred n:\*.*            #search for words in the file 

know more about the [findstr](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/findstr#examples)



| Syntax|	Description|
|-|-|
| dir|	Application|
| n:|	Directory or drive to search|
| /a-d|	/a is the attribute and -d means not directories|
| /s	|Displays files in a specified directory and all subdirectories|
| /b	|Uses bare format (no heading information or summary)|


### powershell Commands

    Get-ChildItem \\192.168.220.129\Finance\                        # 
    New-PSDrive -Name "N" -Root "\\192.168.220.129\Finance" -PSProvider "FileSystem"     #insted of net use use New-PSDrive

    

**PSCredintials objects**

    $username = 'plaintext'
    $password = 'Password123'
    $secpassword = ConvertTo-SecureString $password -AsPlainText -Force
    $cred = New-Object System.Management.Automation.PSCredential $username, $secpassword


    (Get-ChildItem -File -Recurse | Measure-Object).Count     #cmd to count files in sub dir.
    Get-ChildItem -Recurse -Path N:\ -Include *cred* -File    #search for file name having cred
    Get-ChildItem -Recurse -Path N:\ | Select-String "cred" -List #search string like grep and it is userd to search the keyword for file and the text inside the file both.

## SBM in Linux
    sudo mkdir /mnt/Finance
    sudo mount -t cifs -o username=plaintext,password=Password123,domain=. //192.168.220.129/Finance /mnt/Finance           # example.

    //With auth 
    mount -t cifs //192.168.220.129/Finance /mnt/Finance -o credentials=/path/credentialfile

    //structure of the credentialfile
    username=plaintext
    password=Password123
    domain=.

**Note:** We need to install `cifs-utils` to connect to an SMB share folder. To install it we can execute from the command line `sudo apt install cifs-utils`.

**Hunting**

    find /mnt/Finance/ -name *cred*    #hunting for the folder name having cred substring.
    grep -rn /mnt/Finance/ -ie cred    #find the file that have contains cred.

# EMAIL

For recive and send emaim we need only one protocol that is `SMTP` this one send the email over the internt, and for reciving email we use the `POP3` and `IMAP`we are using the evolutin for this 

**install evolution**

    sudo apt-get install evolution

**Note:** If an error appears when starting evolution indicating "bwrap: Can't create file at ...", use this command to start evolution export WEBKIT_FORCE_SANDBOX=0 && evolution.

# Database
**3 ways to connect to the databse.**

1.	Command Line Utilities (mysql or sqsh)
2.	A GUI application to interact with databases such as HeidiSQL, MySQL Workbench, or SQL Server Management Studio.
3.	Programming Languages

## MSSQL 

    sqsh -S 10.129.20.13 -U username -P Password123             #Linux
    sqlcmd -S 10.129.20.13 -U username -P Password123           #windows

## MYSQL

    mysql -u username -pPassword123 -h 10.129.20.13             #linux
    mysql.exe -u username -pPassword123 -h 10.129.20.13         #windows

**Connecting GUI for Database**

for mysql we use MySQL Workbench for both windows and linux and for MSSQL we use SSMS for windows only, and for linux having aulernative like  [dbeaver](https://github.com/dbeaver/dbeaver)

    sudo dpkg -i dbeaver-<version>.deb       #installation.
    dbeaver &                                #run 

SMB|	FTP|	Email|	Databases
|-|-|-|-|
smbclient|	ftp|	Thunderbird|	mssql-cli
CrackMapExec|	lftp|	Claws|	mycli
SMBMap|	ncftp	|Geary|	mssqlclient.py
Impacket	|filezilla|	MailSpring|	dbeaver
psexec.py	|crossftp|	mutt|	MySQL Workbench
smbexec.py	|	| mailutils	|SQL Server Management Studio or SSMS
| | | 	sendEmail |
| | | 	swaks |
| | | 	sendmail |

# Concept of Attack

![Concept of Attack](image.png)